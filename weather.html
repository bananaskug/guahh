<!DOCTYPE html>
<html>
<head>
  <title>Weather</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

    body {
      font-family: 'Poppins', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      /* Updated with lighter shades and more blue coverage */
      background: linear-gradient(to top right, #5c97e0 75%, #fde173 100%);
      color: white;
    }

    #weather-container {
      text-align: center;
      background: rgba(0, 0, 0, 0.2);
      padding: 30px 40px;
      border-radius: 20px;
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
      width: 380px;
    }

    h1 {
      font-size: 2.2em;
      margin-bottom: 5px;
      font-weight: 600;
    }

    #location {
        font-size: 1.1em;
        margin-bottom: 15px;
        font-weight: 300;
    }

    .weather-info {
        display: flex;
        justify-content: space-between;
        margin: 15px 0;
    }

    .info-item {
        text-align: center;
        flex: 1;
    }

    .info-item .value {
        font-size: 1.6em;
        font-weight: 500;
    }

    .info-item .label {
        font-size: 0.9em;
        font-weight: 300;
        color: rgba(255, 255, 255, 0.85);
    }

    #current-temp {
      font-size: 5.5em; 
      font-weight: 700;
      margin: 10px 0;
      position: relative;
    }

    .loader {
        border: 5px solid rgba(255, 255, 255, 0.3);
        border-top: 5px solid #fff;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        animation: spin 2s linear infinite;
        margin: 20px auto;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>

  <div id="weather-container">
    <h1>Melbourne</h1>
    <p id="location">Victoria, Australia</p>
    
    <div id="weather-data">
        <div id="current-temp"><div class="loader"></div></div>
        
        <div class="weather-info">
            <div class="info-item">
                <div class="value" id="high-temp">--</div>
                <div class="label">High</div>
            </div>
            <div class="info-item">
                <div class="value" id="low-temp">--</div>
                <div class="label">Low</div>
            </div>
             <div class="info-item">
                <div class="value" id="apparent-temp">--</div>
                <div class="label">Feels Like</div>
            </div>
        </div>

         <div class="weather-info">
            <div class="info-item">
                <div class="value" id="humidity">--</div>
                <div class="label">Humidity</div>
            </div>
            <div class="info-item">
                <div class="value" id="wind-speed">--</div>
                <div class="label">Wind</div>
            </div>
        </div>

        <div class="weather-info">
             <div class="info-item">
                <div class="value" id="sunrise">--:--</div>
                <div class="label">Sunrise</div>
            </div>
            <div class="info-item">
                <div class="value" id="sunset">--:--</div>
                <div class="label">Sunset</div>
            </div>
        </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Get all the elements to update
      const currentTempElement = document.getElementById('current-temp');
      const highTempElement = document.getElementById('high-temp');
      const lowTempElement = document.getElementById('low-temp');
      const apparentTempElement = document.getElementById('apparent-temp');
      const windSpeedElement = document.getElementById('wind-speed');
      const humidityElement = document.getElementById('humidity');
      const sunriseElement = document.getElementById('sunrise');
      const sunsetElement = document.getElementById('sunset');

      // API URL with added data points for humidity, sunrise, and sunset
      const apiUrl = 'https://api.open-meteo.com/v1/forecast?latitude=-37.81&longitude=144.96&current=temperature_2m,apparent_temperature,relative_humidity_2m,wind_speed_10m&daily=temperature_2m_max,temperature_2m_min,sunrise,sunset&timezone=Australia%2FSydney';

      fetch(apiUrl)
        .then(response => {
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          return response.json();
        })
        .then(data => {
          // --- Current Weather ---
          const currentTemp = data.current.temperature_2m;
          const apparentTemp = data.current.apparent_temperature;
          const windSpeed = data.current.wind_speed_10m;
          const humidity = data.current.relative_humidity_2m;
          
          // --- Daily Weather ---
          const dailyHigh = data.daily.temperature_2m_max[0];
          const dailyLow = data.daily.temperature_2m_min[0];

          // Format sunrise and sunset times
          const sunriseTime = new Date(data.daily.sunrise[0]).toLocaleTimeString('en-AU', { hour: '2-digit', minute: '2-digit', hour12: false }).replace(' am', '').replace(' pm', '');
          const sunsetTime = new Date(data.daily.sunset[0]).toLocaleTimeString('en-AU', { hour: '2-digit', minute: '2-digit', hour12: false }).replace(' am', '').replace(' pm', '');

          // --- Update the DOM ---
          currentTempElement.innerHTML = `${Math.round(currentTemp)}&deg;`;
          highTempElement.innerHTML = `${Math.round(dailyHigh)}&deg;`;
          lowTempElement.innerHTML = `${Math.round(dailyLow)}&deg;`;
          apparentTempElement.innerHTML = `${Math.round(apparentTemp)}&deg;`;
          windSpeedElement.innerHTML = `${Math.round(windSpeed)} km/h`;
          humidityElement.innerHTML = `${humidity}%`;
          sunriseElement.textContent = sunriseTime;
          sunsetElement.textContent = sunsetTime;
        })
        .catch(error => {
          console.error('Error fetching weather data:', error);
          document.getElementById('weather-data').innerHTML = '<p>Could not fetch weather data. Please try again later.</p>';
        });
    });
  </script>

</body>
</html>
