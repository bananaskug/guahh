<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online</title>
    <!--
        Online Portal by AI
        A full-screen, single-file application with live news and multiple games.
    -->
    <style>
        :root {
            --onl-blue: #003399;
            --onl-yellow: #ffcc00;
            --onl-bg: #e6e6e6;
            --onl-panel-bg: #d4d0c8;
            --onl-white: #ffffff;
            --onl-black: #000000;
        }

        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
        }

        #online-container {
            width: 100%;
            height: 100%;
            background-color: var(--onl-bg);
            display: flex;
            flex-direction: column;
        }

        /* --- Toolbar --- */
        #online-toolbar {
            background-color: var(--onl-blue);
            color: var(--onl-white);
            padding: 5px 15px;
            display: flex;
            align-items: center;
            border-bottom: 3px solid var(--onl-yellow);
            flex-shrink: 0;
        }

        #online-logo {
            font-weight: bold;
            font-style: italic;
            font-size: 28px;
            color: var(--onl-yellow);
        }
        
        /* --- Main Content Area --- */
        #online-main {
            display: flex;
            flex-grow: 1;
            overflow: hidden;
        }

        #sidebar {
            width: 220px;
            background-color: var(--onl-panel-bg);
            padding: 15px 10px;
            border-right: 2px inset var(--onl-black);
            display: flex;
            flex-direction: column;
            gap: 10px;
            flex-shrink: 0;
        }
        
        .sidebar-header {
            font-size: 22px;
            margin: 10px 0;
            text-align: center;
            color: var(--onl-blue);
            font-weight: bold;
        }

        .channel-btn {
            background-color: var(--onl-panel-bg);
            border: 2px outset var(--onl-white);
            font-size: 16px;
            font-weight: bold;
            padding: 8px 10px;
            cursor: pointer;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
        }
        .channel-btn:active, .channel-btn.active {
            border-style: inset;
            background-color: #c0c0c0;
        }
        .channel-btn .icon { font-size: 20px; width: 25px; text-align: center; }

        #content-area {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .channel-content { display: none; flex-grow: 1; overflow-y: auto; padding: 15px; background: var(--onl-white); border: 2px inset #808080; animation: fadeIn 0.3s; }
        .channel-content.active { display: flex; flex-direction: column;}
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .content-header {
            background-color: var(--onl-blue);
            color: var(--onl-yellow);
            padding: 5px 10px;
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 15px;
            flex-shrink: 0;
        }
        
        .onl-panel {
            background-color: var(--onl-bg);
            padding: 15px;
            margin-bottom: 20px;
            border: 2px outset var(--onl-white);
        }
        .game-status { text-align:center; font-weight: bold; margin-top: 10px; min-height: 20px;}

        /* --- Welcome Screen --- */
        .action-button { display: inline-flex; align-items: center; gap: 15px; font-size: 24px; padding: 15px 25px; margin-top: 20px; border: 3px outset var(--onl-white); background-color: var(--onl-yellow); color: var(--onl-blue); font-weight: bold; cursor: pointer; }
        .action-button:active { border-style: inset; }
        
        /* --- News Channel --- */
        .news-article h4 { color: var(--onl-blue); margin-bottom: 5px; }
        .news-article a { color: var(--onl-blue); text-decoration: none; }
        .news-article a:hover { text-decoration: underline; }
        .news-article p { font-size: 14px; line-height: 1.4; color: #333; margin-top: 0; }

        /* --- Game Styles --- */
        #ttt-board { display: grid; grid-template-columns: repeat(3, 80px); grid-gap: 5px; justify-content: center; }
        .ttt-cell { width: 80px; height: 80px; border: 2px outset #fff; display: flex; align-items: center; justify-content: center; font-size: 50px; cursor: pointer; background: var(--onl-white); }

        #rps-choices button { font-size: 50px; border: none; background: none; cursor: pointer; padding: 10px 20px; }

        #memory-board { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; max-width: 400px; margin: auto;}
        .memory-card { aspect-ratio: 1 / 1; background: var(--onl-blue); border: 2px outset #fff; cursor: pointer; perspective: 1000px; }
        .memory-card .card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; }
        .memory-card.is-flipped .card-inner { transform: rotateY(180deg); }
        .memory-card.is-matched { opacity: 0.5; }
        .memory-card .front, .memory-card .back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; font-size: 40px;}
        .memory-card .back { transform: rotateY(180deg); }
        
        #snake-canvas { background-color: #9ead86; border: 2px inset #808080; image-rendering: pixelated; image-rendering: -moz-crisp-edges; image-rendering: crisp-edges;}

        #paint-canvas { border: 2px inset #808080; cursor: crosshair; background-color: var(--onl-white); }
        .color-swatch { width: 25px; height: 25px; border: 2px outset var(--onl-white); cursor: pointer; display: inline-block; }
    </style>
</head>
<body>

    <div id="online-container">
        <header id="online-toolbar">
            <div id="online-logo">Online</div>
        </header>

        <main id="online-main">
            <nav id="sidebar">
                <div class="sidebar-header">Channels</div>
                <button class="channel-btn active" data-channel="welcome-channel"><span class="icon">üè†</span> Welcome</button>
                <button class="channel-btn" data-channel="news-channel"><span class="icon">üì∞</span> Today's News</button>
                
                <div class="sidebar-header">Games</div>
                <button class="channel-btn" data-channel="tictactoe-channel"><span class="icon">‚≠ï</span> Tic-Tac-Toe</button>
                <button class="channel-btn" data-channel="rps-channel"><span class="icon">‚úä</span> Rock Paper Scissors</button>
                <button class="channel-btn" data-channel="memory-channel"><span class="icon">üß†</span> Memory Match</button>
                <button class="channel-btn" data-channel="snake-channel"><span class="icon">üêç</span> Snake '98</button>
                <button class="channel-btn" data-channel="painter-channel"><span class="icon">üé®</span> Pixel Painter</button>
            </nav>

            <section id="content-area">
                <!-- Welcome Channel -->
                <div id="welcome-channel" class="channel-content active" style="align-items: center; justify-content: center; text-align: center;">
                    <h1>Hello.</h1>
                    <p>Select a channel from the menu to begin your journey.</p>
                    <button class="action-button" id="go-to-news-btn">
                        <span>üì∞</span> Read Today's News
                    </button>
                </div>

                <!-- News Channel -->
                <div id="news-channel" class="channel-content">
                    <div class="content-header">Online News Service</div>
                    <div class="onl-panel" style="flex-grow: 1; overflow-y: auto;">
                        <div id="news-feed">Click "Today's News" to load stories!</div>
                    </div>
                </div>

                <!-- Tic-Tac-Toe Channel -->
                <div id="tictactoe-channel" class="channel-content">
                    <div class="content-header">Game: Tic-Tac-Toe</div>
                    <div class="onl-panel"><div id="ttt-board"></div><p id="ttt-status" class="game-status"></p></div>
                </div>
                
                <!-- Rock Paper Scissors Channel -->
                <div id="rps-channel" class="channel-content">
                    <div class="content-header">Game: Rock, Paper, Scissors</div>
                     <div class="onl-panel" style="text-align:center;">
                        <div id="rps-choices">
                            <button data-choice="rock">‚úä</button><button data-choice="paper">‚úã</button><button data-choice="scissors">‚úåÔ∏è</button>
                        </div>
                        <p id="rps-result" class="game-status">Choose your hand!</p>
                    </div>
                </div>

                <!-- Memory Match Channel -->
                <div id="memory-channel" class="channel-content">
                    <div class="content-header">Game: Memory Match</div>
                     <div class="onl-panel"><div id="memory-board"></div><p id="memory-status" class="game-status">Moves: 0</p></div>
                </div>
                
                <!-- Snake '98 Channel -->
                <div id="snake-channel" class="channel-content">
                    <div class="content-header">Game: Snake '98</div>
                    <div class="onl-panel" style="text-align:center;">
                        <p class="game-status">Score: <span id="snake-score">0</span></p>
                        <canvas id="snake-canvas" width="400" height="400"></canvas>
                        <p>Use Arrow Keys to move.</p>
                    </div>
                </div>

                <!-- Pixel Painter Channel -->
                <div id="painter-channel" class="channel-content">
                    <div class="content-header">Tool: Pixel Painter</div>
                     <div class="onl-panel">
                        <canvas id="paint-canvas" width="600" height="450"></canvas>
                        <div style="margin-top: 10px; display: flex; align-items: center; gap: 10px;">
                            Colors:
                            <div class="color-swatch active" style="background: black;" data-color="black"></div>
                            <div class="color-swatch" style="background: red;" data-color="red"></div>
                            <div class="color-swatch" style="background: blue;" data-color="blue"></div>
                            <div class="color-swatch" style="background: green;" data-color="green"></div>
                        </div>
                    </div>
                </div>

            </section>
        </main>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- NAVIGATION ---
    const channelButtons = document.querySelectorAll('.channel-btn');
    const contentPanels = document.querySelectorAll('.channel-content');
    let newsFetched = false;
    let currentChannel = 'welcome-channel';

    function showChannel(channelId, forceReset = false) {
        if (channelId === currentChannel && !forceReset) return;
        currentChannel = channelId;

        contentPanels.forEach(panel => panel.classList.remove('active'));
        channelButtons.forEach(btn => btn.classList.remove('active'));
        
        document.getElementById(channelId).classList.add('active');
        document.querySelector(`.channel-btn[data-channel="${channelId}"]`).classList.add('active');
        
        if (channelId === 'tictactoe-channel') tttInit();
        if (channelId === 'memory-channel') memoryInit();
        if (channelId === 'painter-channel') painterInit();
        if (channelId === 'snake-channel') snakeInit();
        if (channelId === 'news-channel' && !newsFetched) fetchNews();
    }

    channelButtons.forEach(button => {
        button.addEventListener('click', (e) => showChannel(e.currentTarget.dataset.channel));
    });

    document.getElementById('go-to-news-btn').addEventListener('click', () => showChannel('news-channel'));

    // --- NEWS FETCHER ---
    async function fetchNews() {
        const newsFeed = document.getElementById('news-feed');
        newsFeed.innerHTML = '<p>Loading latest news...</p>';
        const rssUrl = 'https://api.rss2json.com/v1/api.json?rss_url=https%3A%2F%2Fwww.dogonews.com%2Frss%2Fall-stories';
        try {
            const response = await fetch(rssUrl);
            const data = await response.json();
            if (data.status === 'ok') {
                newsFeed.innerHTML = '';
                data.items.slice(0, 10).forEach(item => {
                    const article = document.createElement('div');
                    article.className = 'news-article';
                    const cleanDescription = item.description.replace(/<[^>]*>?/gm, '');
                    article.innerHTML = `<h4><a href="${item.link}" target="_blank">${item.title}</a></h4><p>${cleanDescription.substring(0, 150)}...</p>`;
                    newsFeed.appendChild(article);
                });
                newsFetched = true;
            } else { throw new Error('API status not ok'); }
        } catch (error) {
            newsFeed.innerHTML = '<p>Sorry, could not load the news right now.</p>';
        }
    }
    
    // --- GAME LOGIC ---

    // Tic-Tac-Toe
    const tttBoard = document.getElementById('ttt-board'), tttStatus = document.getElementById('ttt-status');
    let ttt_currentPlayer, ttt_gameState, ttt_active;
    function tttInit() {
        tttBoard.innerHTML = '';
        for (let i=0; i<9; i++) tttBoard.insertAdjacentHTML('beforeend', `<div class="ttt-cell" data-index="${i}"></div>`);
        tttBoard.querySelectorAll('.ttt-cell').forEach(c => c.addEventListener('click', tttHandleClick));
        ttt_currentPlayer='X'; ttt_gameState=Array(9).fill(null); ttt_active=true;
        tttStatus.textContent = `Player X's turn`;
    }
    function tttHandleClick(e) {
        const i=e.target.dataset.index;
        if(ttt_gameState[i]||!ttt_active)return; ttt_gameState[i]=ttt_currentPlayer;e.target.textContent=ttt_currentPlayer;
        const wc=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
        if(wc.some(c=>c.every(i=>ttt_gameState[i]===ttt_currentPlayer))){tttStatus.textContent=`Player ${ttt_currentPlayer} wins!`;ttt_active=false}
        else if(!ttt_gameState.includes(null)){tttStatus.textContent='Draw!';ttt_active=false}
        else{ttt_currentPlayer=ttt_currentPlayer==='X'?'O':'X';tttStatus.textContent=`Player ${ttt_currentPlayer}'s turn`}
    }

    // Rock, Paper, Scissors
    document.querySelectorAll('#rps-choices button').forEach(b => b.addEventListener('click', () => {
        const pC=b.dataset.choice, cC=['rock','paper','scissors'][Math.floor(Math.random()*3)];
        let r; if(pC===cC)r='Tie!'; else if((pC==='rock'&&cC==='scissors')||(pC==='paper'&&cC==='rock')||(pC==='scissors'&&cC==='paper'))r='You win!'; else r='You lose!';
        document.getElementById('rps-result').textContent = `You: ${pC}, PC: ${cC}. ${r}`;
    }));

    // Memory Match
    const memoryBoard = document.getElementById('memory-board'), memoryStatus = document.getElementById('memory-status');
    const cards =['üëΩ','üöÄ','‚≠ê','ü™ê','üëæ','‚òÑÔ∏è','üëΩ','üöÄ','‚≠ê','ü™ê','üëæ','‚òÑÔ∏è'];
    let firstCard, secondCard, lockBoard, moves;
    function memoryInit() {
        memoryBoard.innerHTML=''; moves=0; memoryStatus.textContent='Moves: 0';
        cards.sort(()=>0.5-Math.random()).forEach(item=>{
            const card=`<div class="memory-card" data-value="${item}"><div class="card-inner"><div class="front">?</div><div class="back">${item}</div></div></div>`;
            memoryBoard.insertAdjacentHTML('beforeend', card);
        });
        document.querySelectorAll('.memory-card').forEach(c=>c.addEventListener('click', flipCard));
    }
    function flipCard() {
        if(lockBoard||this===firstCard||this.classList.contains('is-matched'))return; this.classList.add('is-flipped');
        if(!firstCard){firstCard=this;return} secondCard=this; moves++; memoryStatus.textContent=`Moves: ${moves}`; lockBoard=true;
        firstCard.dataset.value===secondCard.dataset.value?disableCards():unflipCards();
    }
    function disableCards(){firstCard.classList.add('is-matched');secondCard.classList.add('is-matched');if(document.querySelectorAll('.is-matched').length===cards.length)memoryStatus.textContent=`You won in ${moves} moves!`;resetBoard()}
    function unflipCards(){setTimeout(()=>{firstCard.classList.remove('is-flipped');secondCard.classList.remove('is-flipped');resetBoard()},1200)}
    function resetBoard(){[firstCard,secondCard,lockBoard]=[null,null,false]}
    
    // Snake '98
    const snakeCanvas=document.getElementById('snake-canvas'), snakeCtx=snakeCanvas.getContext('2d');
    const snakeScoreEl=document.getElementById('snake-score'), gridSize=20;
    let snake, food, score, direction, gameLoop;
    function snakeInit() {
        if(gameLoop) clearInterval(gameLoop);
        snake=[{x:10,y:10}]; food={}; score=0; direction='right';
        snakeScoreEl.textContent=0; placeFood();
        gameLoop=setInterval(updateSnake,150);
    }
    function placeFood(){food={x:Math.floor(Math.random()*gridSize),y:Math.floor(Math.random()*gridSize)}}
    function updateSnake() {
        const head={...snake[0]};
        if(direction==='up')head.y--;if(direction==='down')head.y++;if(direction==='left')head.x--;if(direction==='right')head.x++;
        if(head.x<0||head.x>=gridSize||head.y<0||head.y>=gridSize||snake.some(p=>p.x===head.x&&p.y===head.y)){clearInterval(gameLoop);return}
        snake.unshift(head);
        if(head.x===food.x&&head.y===food.y){score++;snakeScoreEl.textContent=score;placeFood()}else{snake.pop()}
        drawSnake();
    }
    function drawSnake(){
        snakeCtx.fillStyle='#9ead86'; snakeCtx.fillRect(0,0,snakeCanvas.width,snakeCanvas.height);
        snakeCtx.fillStyle='black';
        snake.forEach(p=>snakeCtx.fillRect(p.x*gridSize,p.y*gridSize,gridSize-1,gridSize-1));
        snakeCtx.fillStyle='darkred'; snakeCtx.fillRect(food.x*gridSize,food.y*gridSize,gridSize-1,gridSize-1);
    }
    document.addEventListener('keydown',e=>{
        const goingUp=direction==='up',goingDown=direction==='down',goingLeft=direction==='left',goingRight=direction==='right';
        if(e.key==='ArrowUp'&&!goingDown)direction='up';if(e.key==='ArrowDown'&&!goingUp)direction='down';
        if(e.key==='ArrowLeft'&&!goingRight)direction='left';if(e.key==='ArrowRight'&&!goingLeft)direction='right';
    });

    // Pixel Painter
    const paintCanvas=document.getElementById('paint-canvas'), paintCtx=paintCanvas.getContext('2d');
    let isPainting=false;
    function painterInit(){paintCtx.lineWidth=5;paintCtx.lineCap='round';paintCtx.strokeStyle='black';}
    document.querySelectorAll('.color-swatch').forEach(s=>{s.addEventListener('click',()=>{paintCtx.strokeStyle=s.dataset.color;document.querySelector('.color-swatch.active').classList.remove('active');s.classList.add('active')})});
    paintCanvas.addEventListener('mousedown',e=>{isPainting=true;draw(e)});
    paintCanvas.addEventListener('mouseup',()=>{isPainting=false;paintCtx.beginPath()});
    paintCanvas.addEventListener('mousemove',draw);
    function draw(e){if(!isPainting)return;const r=paintCanvas.getBoundingClientRect();paintCtx.lineTo(e.clientX-r.left,e.clientY-r.top);paintCtx.stroke();paintCtx.beginPath();paintCtx.moveTo(e.clientX-r.left,e.clientY-r.top)}
    
    // INITIALIZE FIRST CHANNEL
    showChannel('welcome-channel', true);
});
</script>
</body>
</html>